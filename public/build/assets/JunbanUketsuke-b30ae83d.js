import{r as M,w as N,o as u,c as r,a as t,b as T,v as V,n as i,F as _,d as f,t as a,u as B,s as O,e as n,f as D,g as j,h as S,i as C}from"./app-4ff7a416.js";const E=["value"],U={__name:"JunbanStatus",props:{user:Object,junban_status:Array},emits:["changeStatus","loadModal"],setup(h,{emit:e}){const o=h,b=M(0);return b.value=o.user.junbanstatus_id,N(()=>o.user,()=>{b.value=o.user.junbanstatus_id}),(L,g)=>(u(),r(_,null,[t("td",null,[T(t("select",{class:i(["select",h.user.junbanstatus_id?"bg-color-"+h.user.junbanstatus_id:""]),"onUpdate:modelValue":g[0]||(g[0]=v=>b.value=v),onChange:g[1]||(g[1]=v=>L.$emit("changeStatus",v,h.user.id))},[(u(!0),r(_,null,f(o.junban_status,v=>(u(),r("option",{value:v.id},a(v.title),9,E))),256))],34),[[V,b.value]])]),t("td",null,a(o.user.format_created_at),1),t("td",null,a(o.user.junban_num)+"番",1),t("td",null,a(o.user.name),1),t("td",null,a(o.user.karute),1),t("td",null,a(o.user.has_yoyaku_status),1)],64))}},F={class:"page"},I={class:"date"},z={class:"table0"},A={valign:"top"},H={class:"waku"},R={class:"item-box-current"},W={valign:"top"},q={class:"waku"},G={class:"management-title"},K={key:0,class:"line-error"},P={class:"junban-status-link"},Q={class:"table2"},X={key:0,id:"myModal",class:"modal"},Y={class:"modal-content"},tt={__name:"JunbanUketsuke",setup(h){const e=B();e.fetchJunbanUserList();const{countWaitingUsers:o,currentExamineUser:b,activeUsers:L,waitingUsers:g,waitingInsideHospital:v,finishUsers:$}=O(e),m=M(1),k=d=>{m.value=d},y=(d,s)=>{e.changeStatus(d.target.value,s)},J=()=>{e.showLoader=!0,e.fetchJunbanUserList()},c=M({name:""}),w=d=>{c.value=d},x=()=>{c.value={name:""}};setInterval(function(){e.fetchJunbanUserList(!1)},1e4);const p=d=>d.tantou=="院長"?"trbgcolor-1":d.tantou=="代表"?"trbgcolor-2":"trbgcolor-3";return(d,s)=>(u(),r(_,null,[t("div",F,[s[9]||(s[9]=t("h2",null,"順番待ち受付 ",-1)),t("div",I,[t("h3",null,a(n(e).junban_user_list.date)+" ("+a(n(e).junban_user_list.day)+") "+a(n(e).junban_user_list.time)+" 現在 ",1)]),t("table",z,[t("tbody",null,[t("tr",null,[t("td",A,[t("div",H,[s[4]||(s[4]=t("h2",null,"診察中",-1)),t("div",R,[(u(!0),r(_,null,f(n(b),l=>(u(),r("h3",{class:i(p(l))},a(l.junban_num)+"番",3))),256))])])]),t("td",W,[t("div",q,[s[5]||(s[5]=t("h2",null,"待機人数",-1)),t("h3",null,a(n(o))+"人",1)])])])])]),s[10]||(s[10]=t("br",null,null,-1)),t("div",G,[s[6]||(s[6]=D("【受付状況】")),t("button",{class:"management-btn-btn update-btn",onClick:s[0]||(s[0]=l=>J())},"更新")]),n(e).line_error.show?(u(),r("div",K,[s[7]||(s[7]=t("h3",null,"エーラが発射されました。",-1)),t("p",null,a(n(e).line_error.message),1)])):j("",!0),t("div",P,[t("a",{href:"",class:i(m.value==1?"active":""),onClick:s[1]||(s[1]=S(l=>k(1),["prevent"]))},"待機人",2),t("a",{href:"",class:i(m.value==2?"active":""),onClick:s[2]||(s[2]=S(l=>k(2),["prevent"]))},"診察中",2),t("a",{href:"",class:i(m.value==3?"active":""),onClick:s[3]||(s[3]=S(l=>k(3),["prevent"]))},"診察終了",2)]),t("table",Q,[t("tbody",null,[s[8]||(s[8]=t("tr",null,[t("th",null,"更新"),t("th",null,"受付時間"),t("th",null,"順番"),t("th",null,"呼出名前"),t("th",null,"診察券No.下4桁"),t("th",null,"事前予約")],-1)),m.value=="1"?(u(!0),r(_,{key:0},f(n(g),l=>(u(),r("tr",{class:i(p(l))},[C(U,{user:l,junban_status:n(e).junban_user_list.junban_status,onChangeStatus:y,onLoadModal:w},null,8,["user","junban_status"])],2))),256)):j("",!0),m.value=="2"?(u(!0),r(_,{key:1},f(n(b),l=>(u(),r("tr",{class:i(p(l))},[C(U,{user:l,junban_status:n(e).junban_user_list.junban_status,onChangeStatus:y,onLoadModal:w},null,8,["user","junban_status"])],2))),256)):j("",!0),m.value=="3"?(u(!0),r(_,{key:2},f(n($),l=>(u(),r("tr",{class:i(p(l))},[C(U,{user:l,junban_status:n(e).junban_user_list.junban_status,onChangeStatus:y,onLoadModal:w},null,8,["user","junban_status"])],2))),256)):j("",!0)])]),t("div",{class:i(["alert alert-success",n(e).message.show&&n(e).message.status=="success"?"fadeOut":""]),role:"alert","data-mdb-color":"success"},a(n(e).message.message),3),t("div",{class:i(["alert alert-danger",n(e).message.show&&n(e).message.status=="error"?"fadeOut":""]),role:"alert","data-mdb-color":"danger"},a(n(e).message.message),3)]),s[13]||(s[13]=t("br",null,null,-1)),c.value.name!=""?(u(),r("div",X,[t("div",Y,[t("span",{class:"close",onClick:x},"×"),s[11]||(s[11]=t("h2",null,"内容",-1)),t("h3",null,"呼出名前：　"+a(c.value.name),1),t("h3",null,"担当医の希望：　"+a(c.value.tantou),1),t("h3",null,"来院目的：　"+a(c.value.mokuteki),1),s[12]||(s[12]=t("h3",null,"上記の内容を簡単：",-1)),t("p",null,a(c.value.oshirase),1)])])):j("",!0)],64))}};export{tt as default};
